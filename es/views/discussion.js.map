{"version":3,"sources":["../../src/views/discussion.js"],"names":["getOr","pipe","treant","createDiscussion","updateDiscussionTextareaAction","resetDiscussionTextareaAction","createThreadAction","createMapStateToProps","dispatch","api","channel","state","params","updateDiscussionTextarea","resetDiscussionTextarea","createThread","threads","discussions","title","value","postDisabled","onPost","message","onChange","event","target","options","mapStateToProps","Discussion"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,iBAAlB;AACA,OAAOC,IAAP,MAAiB,gBAAjB;AACA,OAAO,KAAKC,MAAZ,MAAwB,6BAAxB;AACA,SAAQC,gBAAR,QAA+B,0BAA/B;AACA,SACEC,8BADF,EAEEC,6BAFF,QAGO,0BAHP;AAIA,SAAQC,kBAAR,QAAiC,8BAAjC;;AAEA,MAAMC,wBAAwB,CAAC,EAACC,QAAD,EAAWC,GAAX,EAAgBC,OAAhB,EAAD,KAA8B,CAAC,EAACC,KAAD,EAAQC,MAAR,EAAD,KAAqB;AAC/E,QAAMC,2BAA2BT,+BAA+BI,QAA/B,CAAjC;AACA,QAAMM,0BAA0BT,8BAA8BG,QAA9B,CAAhC;AACA,QAAMO,eAAeT,mBAAmB,EAACG,GAAD,EAAMC,OAAN,EAAnB,EAAmCF,QAAnC,CAArB;;AAEA,QAAMQ,UAAUL,MAAMF,GAAN,CAAUQ,WAAV,CAAsBD,OAAtB,IAAiC,EAAjD;;AAEA,SAAO;AACLE,WAAO,eADF;AAELF,WAFK;AAGLG,WAAOnB,MAAM,EAAN,EAAU,8BAAV,EAA0CW,KAA1C,CAHF;AAILS,kBAAcpB,MAAM,IAAN,EAAY,qCAAZ,EAAmDW,KAAnD,CAJT;AAKLU,YAAQ,MAAM;AACZN,mBAAa;AACXL,eADW;AAEXY,iBAAStB,MAAM,EAAN,EAAU,8BAAV,EAA0CW,KAA1C;AAFE,OAAb;AAIAG;AACD,KAXI;AAYLS,cAAUC,SAASX,yBAAyBW,MAAMC,MAAN,CAAaN,KAAtC;AAZd,GAAP;AAcD,CArBD;;AAuBA,SACEZ,qBADF;;AAIA,gBAAemB,WAAW;AACxB,QAAMC,kBAAkBpB,sBAAsBmB,OAAtB,CAAxB;AACA,QAAME,aAAazB,iBAAiBD,MAAjB,EAAyBwB,OAAzB,CAAnB;;AAEA,SAAOzB,KACL0B,eADK,EAELC,UAFK,CAAP;AAID,CARD","file":"discussion.js","sourcesContent":["import getOr from 'lodash/fp/getOr';\nimport pipe from 'lodash/fp/pipe';\nimport * as treant from '@coorpacademy/treantjs-core';\nimport {createDiscussion} from '@coorpacademy/components';\nimport {\n  updateDiscussionTextareaAction,\n  resetDiscussionTextareaAction\n} from '../actions/ui-discussion';\nimport {createThreadAction} from '../actions/api-create-thread';\n\nconst createMapStateToProps = ({dispatch, api, channel}) => ({state, params}) => {\n  const updateDiscussionTextarea = updateDiscussionTextareaAction(dispatch);\n  const resetDiscussionTextarea = resetDiscussionTextareaAction(dispatch);\n  const createThread = createThreadAction({api, channel}, dispatch);\n\n  const threads = state.api.discussions.threads || [];\n\n  return {\n    title: 'Sandbox forum',\n    threads,\n    value: getOr('', 'ui.discussion.textarea.value', state),\n    postDisabled: getOr(true, 'ui.discussion.textarea.postDisabled', state),\n    onPost: () => {\n      createThread({\n        channel,\n        message: getOr('', 'ui.discussion.textarea.value', state)\n      });\n      resetDiscussionTextarea();\n    },\n    onChange: event => updateDiscussionTextarea(event.target.value)\n  };\n};\n\nexport {\n  createMapStateToProps\n};\n\nexport default options => {\n  const mapStateToProps = createMapStateToProps(options);\n  const Discussion = createDiscussion(treant, options);\n\n  return pipe(\n    mapStateToProps,\n    Discussion\n  );\n};\n"]}